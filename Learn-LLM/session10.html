<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session 10: Performance Optimization & Project - LLM Studio Course</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; }
        .content-section { background: white; border-radius: 12px; padding: 2rem; margin: 2rem 0; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .session-header { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; }
        .key-concept { background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; padding: 1.5rem; margin: 1.5rem 0; border-radius: 0 8px 8px 0; }
        .optimization-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin: 2rem 0; }
        .optimization-card { background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 2rem; transition: all 0.3s ease; }
        .optimization-card:hover { border-color: #ef4444; transform: translateY(-5px); box-shadow: 0 10px 25px rgba(239, 68, 68, 0.2); }
        .performance-metrics { background: #f8f9fa; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
        .metric-comparison { display: flex; align-items: center; gap: 1rem; margin: 1rem 0; }
        .metric-bar { flex: 1; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; }
        .metric-fill { height: 100%; border-radius: 4px; transition: width 1s ease; }
        .code-example { background: #1e1e1e; color: #f8f8f2; padding: 1rem; border-radius: 8px; margin: 1rem 0; font-family: 'JetBrains Mono', monospace; }
        .time-indicator { background: #fef2f2; padding: 0.5rem 1rem; border-radius: 20px; display: inline-block; margin-bottom: 1rem; color: #dc2626; }
        .progress-indicator { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); height: 4px; border-radius: 2px; margin-bottom: 2rem; }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #e5e7eb; }
        .project-card { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #f59e0b; border-radius: 12px; padding: 2rem; margin: 2rem 0; }
        .benchmark-results { background: white; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; border: 1px solid #e5e7eb; }
        .speed-indicator { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: bold; }
        .speed-fast { background: #dcfce7; color: #166534; }
        .speed-medium { background: #fef3c7; color: #92400e; }
        .speed-slow { background: #fef2f2; color: #dc2626; }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="fas fa-brain text-primary me-2"></i>LLM Studio Course
            </a>
            <div class="d-flex align-items-center">
                <span class="badge bg-danger me-2">Session 10 of 15</span>
                <span class="text-muted small">45 min + 60 min project</span>
            </div>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="container">
        <div class="progress-indicator" style="width: 66.67%;"></div>
    </div>

    <!-- Session Header -->
    <div class="container">
        <div class="session-header">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h1 class="display-5 fw-bold mb-3">Session 10: Performance Optimization</h1>
                    <p class="lead mb-0">Maximize speed, efficiency, and quality of LLM inference</p>
                </div>
                <div class="text-end">
                    <div class="time-indicator">
                        <i class="fas fa-clock me-1"></i>45 min + 60 min project
                    </div>
                    <div class="badge bg-white text-danger">
                        <i class="fas fa-rocket me-1"></i>Advanced Level
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Learning Objectives -->
        <div class="content-section">
            <h2 class="h4 mb-3"><i class="fas fa-bullseye text-danger me-2"></i>Learning Objectives</h2>
            <div class="row">
                <div class="col-md-6">
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Master quantization techniques</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Understand model compression</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Optimize inference parameters</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Implement caching strategies</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Benchmark performance improvements</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Complete optimization project</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-tachometer-alt text-danger me-2"></i>Understanding Performance Metrics</h2>

            <div class="performance-metrics">
                <h5 class="text-danger mb-3">Key Performance Indicators</h5>
                <div class="metric-comparison">
                    <span class="small fw-bold">Response Time:</span>
                    <div class="metric-bar">
                        <div class="metric-fill bg-danger" style="width: 100%"></div>
                    </div>
                    <span class="small">Critical for UX</span>
                </div>
                <div class="metric-comparison">
                    <span class="small fw-bold">Memory Usage:</span>
                    <div class="metric-bar">
                        <div class="metric-fill bg-warning" style="width: 80%"></div>
                    </div>
                    <span class="small">Hardware limitation</span>
                </div>
                <div class="metric-comparison">
                    <span class="small fw-bold">Model Quality:</span>
                    <div class="metric-bar">
                        <div class="metric-fill bg-success" style="width: 90%"></div>
                    </div>
                    <span class="small">Output accuracy</span>
                </div>
                <div class="metric-comparison">
                    <span class="small fw-bold">Cost Efficiency:</span>
                    <div class="metric-bar">
                        <div class="metric-fill bg-info" style="width: 70%"></div>
                    </div>
                    <span class="small">Resource utilization</span>
                </div>
            </div>

            <div class="key-concept">
                <h4 class="h5 text-danger mb-3">‚öñÔ∏è Optimization Trade-offs</h4>
                <p>Performance optimization involves balancing competing priorities. Faster inference often means higher memory usage or slightly reduced quality. Understanding these trade-offs is key to effective optimization.</p>
            </div>
        </div>

        <!-- Quantization Techniques -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-compress text-danger me-2"></i>Quantization: Reducing Model Size</h2>

            <div class="optimization-grid">
                <div class="optimization-card">
                    <div class="speed-indicator speed-fast mb-3">75% Smaller</div>
                    <h5 class="text-primary mb-3">4-bit Quantization (GGUF)</h5>
                    <p class="mb-2">Most popular quantization for local LLMs. Balances size and quality perfectly.</p>
                    <ul class="small mb-3">
                        <li>75% reduction in model size</li>
                        <li>Minimal quality loss</li>
                        <li>Works on most GPUs</li>
                        <li>LM Studio default</li>
                    </ul>
                    <div class="badge bg-success">Recommended</div>
                </div>

                <div class="optimization-card">
                    <div class="speed-indicator speed-medium mb-3">50% Smaller</div>
                    <h5 class="text-info mb-3">8-bit Quantization</h5>
                    <p class="mb-2">Conservative quantization for maximum quality preservation.</p>
                    <ul class="small mb-3">
                        <li>50% reduction in size</li>
                        <li>Best quality retention</li>
                        <li>Higher memory usage</li>
                        <li>Slower inference</li>
                    </ul>
                    <div class="badge bg-info">High Quality</div>
                </div>

                <div class="optimization-card">
                    <div class="speed-indicator speed-slow mb-3">87.5% Smaller</div>
                    <h5 class="text-warning mb-3">2-bit Quantization</h5>
                    <p class="mb-2">Extreme compression for minimal hardware requirements.</p>
                    <ul class="small mb-3">
                        <li>Maximum size reduction</li>
                        <li>Significant quality loss</li>
                        <li>Very fast inference</li>
                        <li>Limited use cases</li>
                    </ul>
                    <div class="badge bg-warning">Experimental</div>
                </div>
            </div>

            <div class="code-example">
# Quantization comparison
Original Model (FP16): 13GB VRAM, High quality
4-bit Quantized:     3.5GB VRAM, Good quality
8-bit Quantized:     7GB VRAM, Excellent quality
2-bit Quantized:     1.5GB VRAM, Basic quality
            </div>
        </div>

        <!-- Inference Optimization -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-zap text-danger me-2"></i>Inference Parameter Optimization</h2>

            <div class="row">
                <div class="col-md-6">
                    <h5 class="text-success mb-3">Temperature & Creativity</h5>
                    <div class="benchmark-results">
                        <strong>Temperature Settings:</strong>
                        <ul class="mb-0 small">
                            <li><code>0.1 - 0.3:</code> Factual, consistent responses</li>
                            <li><code>0.4 - 0.6:</code> Balanced creativity and accuracy</li>
                            <li><code>0.7 - 1.0:</code> Highly creative, varied responses</li>
                            <li><code>1.5+:</code> Very random, unpredictable output</li>
                        </ul>
                    </div>

                    <h5 class="text-info mb-3 mt-4">Context Window Management</h5>
                    <div class="benchmark-results">
                        <strong>Optimal Settings:</strong>
                        <ul class="mb-0 small">
                            <li><strong>Short tasks:</strong> 512-1024 tokens</li>
                            <li><strong>Medium tasks:</strong> 2048-4096 tokens</li>
                            <li><strong>Long tasks:</strong> 8192+ tokens (slower)</li>
                            <li><strong>Streaming:</strong> Enable for real-time output</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <h5 class="text-warning mb-3">Advanced Parameters</h5>
                    <div class="code-example">
// Optimal settings for different use cases

// For coding tasks
temperature: 0.2
top_p: 0.9
top_k: 40
repetition_penalty: 1.1

// For creative writing
temperature: 0.8
top_p: 0.95
top_k: 50
repetition_penalty: 1.05

// For factual Q&A
temperature: 0.1
top_p: 0.9
top_k: 30
repetition_penalty: 1.0
                    </div>

                    <h5 class="text-danger mb-3 mt-4">Caching Strategies</h5>
                    <div class="benchmark-results">
                        <strong>Performance Boosters:</strong>
                        <ul class="mb-0 small">
                            <li><strong>KV Cache:</strong> 2-3x speedup for sequences</li>
                            <li><strong>Model preload:</strong> Faster initial responses</li>
                            <li><strong>Batch processing:</strong> Multiple requests efficiently</li>
                            <li><strong>GPU memory:</strong> Keep model loaded</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hardware-Specific Optimization -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-microchip text-danger me-2"></i>Hardware-Specific Optimization</h2>

            <div class="optimization-grid">
                <div class="optimization-card">
                    <i class="fas fa-memory fa-2x text-primary mb-3"></i>
                    <h5 class="text-primary mb-3">CPU Optimization</h5>
                    <ul class="small mb-3">
                        <li>Use AVX-512 capable CPUs</li>
                        <li>Enable NUMA optimization</li>
                        <li>Use larger batch sizes</li>
                        <li>Consider CPU-specific quantization</li>
                    </ul>
                    <div class="small text-muted">Best for: Low-end hardware, always-on services</div>
                </div>

                <div class="optimization-card">
                    <i class="fas fa-gamepad fa-2x text-success mb-3"></i>
                    <h5 class="text-success mb-3">GPU Acceleration</h5>
                    <ul class="small mb-3">
                        <li>NVIDIA RTX 30-series or better</li>
                        <li>Use cuBLAS for matrix operations</li>
                        <li>Enable Flash Attention</li>
                        <li>Optimize VRAM usage</li>
                    </ul>
                    <div class="small text-muted">Best for: Fast inference, complex tasks</div>
                </div>

                <div class="optimization-card">
                    <i class="fas fa-server fa-2x text-info mb-3"></i>
                    <h5 class="text-info mb-3">Multi-GPU Setup</h5>
                    <ul class="small mb-3">
                        <li>Tensor Parallelism for large models</li>
                        <li>Pipeline Parallelism for efficiency</li>
                        <li>Load balancing across GPUs</li>
                        <li>NVLINK for fast inter-GPU communication</li>
                    </ul>
                    <div class="small text-muted">Best for: Enterprise deployments, large models</div>
                </div>
            </div>
        </div>

        <!-- Model Architecture Optimization -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-project-diagram text-danger me-2"></i>Model Architecture Optimization</h2>

            <div class="row">
                <div class="col-md-6">
                    <h5 class="text-primary mb-3">Distillation Techniques</h5>
                    <div class="code-example">
// Knowledge Distillation
Teacher Model: Large, accurate (175B params)
Student Model: Small, fast (7B params)

// Training process:
// 1. Teacher generates soft labels
// 2. Student learns from both hard and soft labels
// 3. Student achieves 90% of teacher performance
// 4. Student is 25x smaller and faster
                    </div>
                </div>
                <div class="col-md-6">
                    <h5 class="text-info mb-3">Pruning Strategies</h5>
                    <div class="code-example">
// Neural Pruning
Original: 7B parameters
Pruned: 4.2B parameters (40% reduction)

// Techniques:
// 1. Weight magnitude pruning
// 2. Structured pruning (attention heads)
// 3. Dynamic pruning during inference
// 4. Iterative pruning + fine-tuning
                    </div>
                </div>
            </div>

            <div class="alert alert-warning mt-3">
                <strong>‚ö†Ô∏è Architecture Warning:</strong> Modifying model architecture can significantly impact performance. Always benchmark changes and consider retraining if necessary.
            </div>
        </div>

        <!-- Project: Performance Benchmarking -->
        <div class="project-card">
            <h2 class="h4 mb-4"><i class="fas fa-chart-bar text-warning me-2"></i>Project: LLM Performance Optimization</h2>

            <div class="alert alert-warning">
                <strong>‚è∞ Time Estimate:</strong> 45-60 minutes
                <strong>üéØ Objective:</strong> Optimize an LLM for specific performance requirements and benchmark improvements
            </div>

            <h5 class="text-primary mb-3">Project Overview</h5>
            <p>Take a baseline model and apply various optimization techniques to improve performance metrics. This project demonstrates practical optimization strategies and measurement techniques.</p>

            <div class="row">
                <div class="col-md-8">
                    <h5 class="text-success mb-3">Optimization Pipeline</h5>
                    <div class="optimization-card">
                        <h6>Phase 1: Baseline Measurement (10 minutes)</h6>
                        <ul class="small">
                            <li>Load model in LM Studio (default settings)</li>
                            <li>Measure response time, memory usage, quality</li>
                            <li>Run standardized test prompts</li>
                            <li>Document baseline metrics</li>
                        </ul>
                    </div>

                    <div class="optimization-card">
                        <h6>Phase 2: Quantization Optimization (15 minutes)</h6>
                        <ul class="small">
                            <li>Test different quantization levels (2-bit, 4-bit, 8-bit)</li>
                            <li>Compare speed, memory, and quality metrics</li>
                            <li>Find optimal balance for your use case</li>
                            <li>Document quantization effects</li>
                        </ul>
                    </div>

                    <div class="optimization-card">
                        <h6>Phase 3: Parameter Tuning (15 minutes)</h6>
                        <ul class="small">
                            <li>Optimize temperature, top-p, top-k settings</li>
                            <li>Test different context window sizes</li>
                            <li>Experiment with repetition penalties</li>
                            <li>Find optimal parameter combinations</li>
                        </ul>
                    </div>

                    <div class="optimization-card">
                        <h6>Phase 4: Results Analysis (15 minutes)</h6>
                        <ul class="small">
                            <li>Compare all configurations</li>
                            <li>Create performance improvement report</li>
                            <li>Document trade-offs and recommendations</li>
                            <li>Summarize optimization learnings</li>
                        </ul>
                    </div>
                </div>

                <div class="col-md-4">
                    <h5 class="text-info mb-3">Metrics to Track</h5>
                    <div class="benchmark-results">
                        <strong>Performance Metrics:</strong>
                        <ul class="small mb-2">
                            <li>‚Ä¢ Response time (tokens/sec)</li>
                            <li>‚Ä¢ Memory usage (VRAM/RAM)</li>
                            <li>‚Ä¢ Output quality (subjective)</li>
                            <li>‚Ä¢ Consistency (variability)</li>
                        </ul>

                        <strong>Test Scenarios:</strong>
                        <ul class="small mb-2">
                            <li>‚Ä¢ Short responses (50 tokens)</li>
                            <li>‚Ä¢ Long responses (500 tokens)</li>
                            <li>‚Ä¢ Complex reasoning tasks</li>
                            <li>‚Ä¢ Creative generation</li>
                        </ul>
                    </div>

                    <div class="mt-3">
                        <div class="alert alert-success small">
                            <strong>üí° Expected Results:</strong><br>
                            ‚Ä¢ 2-5x speed improvement<br>
                            ‚Ä¢ 50-80% memory reduction<br>
                            ‚Ä¢ Maintained or improved quality
                        </div>
                    </div>
                </div>
            </div>

            <div class="alert alert-info mt-4">
                <strong>üõ†Ô∏è Tools Required:</strong> LM Studio, stopwatch/timer, text editor for documentation
                <br><strong>üìä Success Criteria:</strong> Measurable performance improvements with quality preservation
            </div>
        </div>

        <!-- Common Optimization Pitfalls -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-exclamation-triangle text-danger me-2"></i>Optimization Pitfalls & Solutions</h2>

            <div class="row">
                <div class="col-md-6">
                    <h5 class="text-danger mb-3">Common Mistakes</h5>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Over-quantization:</strong> Too aggressive quantization destroys quality</li>
                        <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Wrong parameters:</strong> Temperature/top-p settings inappropriate for task</li>
                        <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Memory mismanagement:</strong> Not monitoring VRAM usage properly</li>
                        <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Unrealistic expectations:</strong> Expecting lossless optimization</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5 class="text-success mb-3">Best Practices</h5>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Iterative testing:</strong> Change one variable at a time</li>
                        <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Task-specific optimization:</strong> Different settings for different use cases</li>
                        <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Quality monitoring:</strong> Always check output quality after optimization</li>
                        <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Documentation:</strong> Record all changes and their effects</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Key Takeaways -->
        <div class="content-section">
            <h2 class="h4 mb-4"><i class="fas fa-lightbulb text-danger me-2"></i>Key Takeaways</h2>

            <div class="alert alert-danger">
                <h5 class="alert-heading"><i class="fas fa-rocket me-2"></i>Performance Optimization Mastery</h5>
                <ul class="mb-0">
                    <li><strong>Quantization enables:</strong> Running larger models on limited hardware with minimal quality loss</li>
                    <li><strong>Parameter tuning:</strong> Correct temperature, context, and sampling settings dramatically improve results</li>
                    <li><strong>Hardware optimization:</strong> GPU acceleration provides 10-50x performance improvements</li>
                    <li><strong>Caching strategies:</strong> KV cache and model preloading reduce latency for repeated interactions</li>
                    <li><strong>Trade-off awareness:</strong> Speed improvements often come with memory or quality trade-offs</li>
                    <li><strong>Measurement matters:</strong> Always benchmark changes to ensure actual performance improvements</li>
                </ul>
            </div>

            <div class="key-concept">
                <h4 class="h5 text-danger mb-3">üöÄ From Theory to Practice</h4>
                <p>Performance optimization transforms theoretical AI knowledge into practical, deployable solutions. You've now mastered the techniques to make LLMs fast, efficient, and production-ready.</p>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="session09.html" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i>Previous: Model Architecture
            </a>
            <a href="session11.html" class="btn btn-primary">
                Next: Application Integration <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Mark session as completed and animate metrics
        document.addEventListener('DOMContentLoaded', function() {
            // Mark session completion
            if (typeof localStorage !== 'undefined') {
                const completedSessions = JSON.parse(localStorage.getItem('llm-course-completed') || '[]');
                if (!completedSessions.includes(10)) {
                    completedSessions.push(10);
                    localStorage.setItem('llm-course-completed', JSON.stringify(completedSessions));
                }
            }

            // Animate metric bars on scroll
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const fills = entry.target.querySelectorAll('.metric-fill');
                        fills.forEach(fill => {
                            const width = fill.style.width;
                            fill.style.width = '0%';
                            setTimeout(() => {
                                fill.style.width = width;
                            }, 200);
                        });
                    }
                });
            });

            document.querySelectorAll('.metric-comparison').forEach(el => observer.observe(el));
        });
    </script>
</body>
</html>
